@using Orchard.Liquid;
@model Orchard.Liquid.ViewModels.LiquidPartViewModel
@inject ILiquidManager LiquidManager

@{ 
    string liquid = Model.Liquid;

    var model = new
    {
        ContentItem = Model.LiquidPart.ContentItem,
        Content = new JTokenDrop((Newtonsoft.Json.Linq.JToken)Model.LiquidPart.ContentItem.Content),
        Context = Context,
        User = User
    };

    var html = LiquidManager.GetTemplate(liquid).Render(DotLiquid.Hash.FromAnonymousObject(model));
}

@Html.Raw(html)
